knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(echo = FALSE)
msps<- speeches %>% select(display_as, name, parl_id, party, gender, constituency, region, msp_type, wikidataid, party.facts.id)
if(!require("pacman"))install.packages("pacman")
pacman::p_load("tidyverse", "reticulate", "here")
knitr::opts_chunk$set(echo = FALSE)
harvard <- read.csv(here("data_raw", "rawdata.csv"))
if(!require("pacman"))install.packages("pacman")
pacman::p_load("tidyverse", "reticulate", "here")
harvard <- read.csv(here("data_raw", "rawdata.csv"))
source(here("scripts", "download-csv-html.R")) # once you have run the script once, you can comment out this line by typing "#" in front of it. Doing this will mean the data loads directly from your local data_raw folder rather than downloading every time.
source(here("scripts", "download-csv-http.R")) # once you have run the script once, you can comment out this line by typing "#" in front of it. Doing this will mean the data loads directly from your local data_raw folder rather than downloading every time.
source(here("scripts", "download-csv-http.R")) # once you have run the script once, you can comment out this line by typing "#" in front of it. Doing this will mean the data loads directly from your local data_raw folder rather than downloading every time.
harvard <- read.csv(here("data_raw", "rawdata.csv"))
speeches <- subset(harvard, harvard$is_speech == 1)
# Analysis replication in R
# Load packages
if(!require("here"))install.packages("here")
source(here("scripts", "r-packages.R"))
# Load data
harvard <- read.csv(here("data_raw", "rawdata.csv"))
speeches <- harvard %>% filter(is_speech == 1)
rm(harvard)
speeches <- speeches %>% filter(!is.na(parl_id)) # drop all without parl_id
# define counts of speeches
n_speeches <- nrow(speeches)
n_speeches_f <- speeches %>%
subset(speeches$gender == "F") %>%
nrow()
n_speeches_m <- speeches %>%
subset(speeches$gender == "M") %>%
nrow()
prop_speeches_f <- n_speeches_f/n_speeches
prop_speeches_m <- n_speeches_m/n_speeches
prop_speeches_m + prop_speeches_f
MSPs_all <- speeches %>%
select(parl_id, name, gender, wikidataid) %>%
unique()
# By parliament
source(here("scripts", "analysis-by-parly.R"))
# n_m | n_f | p_m | p_f
n_m <- c(n_speeches_m1, n_speeches_m2, n_speeches_m3, n_speeches_m4, n_speeches_m5)
n_f <- c(n_speeches_f1, n_speeches_f2, n_speeches_f3, n_speeches_f4, n_speeches_f5)
p_m <- c(prop_speeches_m1, prop_speeches_m2, prop_speeches_m3, prop_speeches_m4, prop_speeches_m5)
p_f <- c(prop_speeches_f1, prop_speeches_f2, prop_speeches_f3, prop_speeches_f4, prop_speeches_f5)
summary <- data.frame(n_m, n_f, p_m, p_f)
rownames(summary) <- c("First Parliament", "Second Parliament", "Third Parliament", "Fourth Parliament", "Fifth Parliament")
colnames(summary) <- c("Number speeches by men", "Number of speeches by women", "Proportion of speeches by men", "Proportion of speeches by women")
write.csv(here("output_data", "summary.csv"))
# explore different types of speeches
types <- data.frame(unique(speeches$item))
write.csv(summary, here("output_data", "summary.csv"))
