---
title: "DS105M: Women In Parliament - Data"
author: Alanah Sarginson, Noemie Claret, Len Metson
date: November 26, 2021
output:
  slidy_presentation: default
  ioslides_presentation: default
---

```{css echo=FALSE}
h1 {
text-align: center;
color:tomato;
font-size: 29px;
font-weight:bold;
align-self: center;
text-align: center;
padding-top: 200px
}
div {font-size: 24px;
letter-spacing: 2px;
word-spacing: 2.5px;
text-decoration: none;
font-style: normal;
font-variant: normal;
text-transform: none;
padding-top: 20px;
}
ul, p {
padding: 1px 2% 1px;
max-height:90%
text-align: ltr;
font-weight: normal;
color: #1E1E1E;
}
* {background-color: #EDEDED;
background-size: 100%;
font-family: "Lucida Console", Monaco, monospace;
}
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r packages, include=FALSE}
if(!require("pacman"))install.packages("pacman")

pacman::p_load("tidyverse", "reticulate", "here")
```


```{r data, include=FALSE}
#source(here("scripts", "download-csv-html.R")) # once you have run the script once, you can comment out this line by typing "#" in front of it. Doing this will mean the data loads directly from your local data_raw folder rather than downloading every time.

harvard <- read.csv(here("data_raw", "rawdata.csv"))

speeches <- subset(harvard, harvard$is_speech == 1)
```
# Slide 1.1: Brief summary

  * Gender bias the time MSPs speak in the Scottish Parliament.
  * Discrimination thought to lead to women being less able to participate in debates
  * Do we see this in the data?

# Slide 1.2: Organisation

  * Reproducibility
    * Anyone on any machine should be able to run our full project using only the materials contained in our GitHub repository and open-source data science tools.

  * Everything done programmatically

# Slide 1.3: Workflow

  * Divided tasks, everyone using different tools. E.g.
    * Atom for editing RMarkdown
    * Spyder for developing Python code
    * RStudio for editing RMarkdown and CSS

  * GitHub
    * Could push and pull to the same repository
      * Could all use our preferred tools on the same files
    * Version control
      * Useful when Len accidentally deleted all the R code for the summary statistics (oops)
    * Publicly available
      * Scrutiny and reproducibility

# Slide 2.1: Obtaining the data

  * Harvard Dataverse
    * ParlScot: scrapped transcripts of Scottish Parliament plenary debates.
    * Organised in a semi-strucutred datasets
    * Publically available for download as a `csv` file

  * Downloaded using HTTP protocol.

```
# specify the url
url <- "https://dataverse.harvard.edu/api/access/datafile/4432885"

# download the file into a specified path - add your analysis folder in between " "
download.file(url, here("data_raw", "rawdata.csv"))
```

  * `.gitignore` file to avoid large csv being pushed into GitHub.

# Slide 2.2: Summary statistics on speeches

  * There are `r nrow(speeches)` speeches in our dataset.
  * `r nrow(subset(speeches, speeches$gender == "F"))` speeches were by women.
  * Thus, `r (nrow(subset(speeches, speeches$gender == "F"))/ nrow(speeches))*100`% speeches in the dataset overall were by women.

# Slide 2.3: Summary statistics on MSPs
```{r msps, include = FALSE}
# select name and gender variables from speeches
msps <- speeches %>% select(name, gender)

# retain only unique values (because each MSPs' name is repeated in each speech)
msps <- unique(msps)

# non-MSPs have no gender associated so drop all rows with NA in gender
msps <- drop_na(msps)
```

  * There are `r nrow(msps)` MSPs in our dataset.
  * `r nrow(subset(msps, msps$gender == "F"))` of them are women.
  * Therefore, across our entire dataset, `r (nrow(subset(msps, msps$gender == "F"))/ nrow(msps))*100`% of MSPs are women.

# Slide 3.1: Data wrangling
1. **Data cleaning**
  + Subset the semi-structured dataset to keep only the relevant information
  + Discard information irrelevant to our analysis
2. **Improving data accuracy**
  + Strip the data of missing values
  + Cross-check summary statistics results across R and python
  + Ensure consistency in results across languages
3. **Partition and export the dataframe to the repository**
  + Result: structured, relational data ready to be used for analysis
  + Partitions of dataframe can be used to count the number of syllables spoken by MSPs and compare the obtained values between men and women

# Slide 3.2: Analysis
**Some insights we'd like to draw from the data:**

* Average and median number of syllables by gender
* Whether this discrepency also exists on Twitter
* See if gender-related lexic is found at a higher rate in women's speeches than in men's speeches (using sentiment analysis)

# Slide 3.3: Visualisations planned
**Visualisations planned**

**Tools we're planning on using:**

* Tableau Public
* SQL
